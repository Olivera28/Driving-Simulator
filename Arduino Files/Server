#include <SPI.h>
#include <WiFiNINA.h>
#include "arduino_secrets.h"
char ssid[] = "iot_lab";          //  your network SSID (name)
char pass[] = "44FEC4DDB9";   // your network password
int status = WL_IDLE_STATUS;

WiFiServer server(80);

void setup() {
  // initialize serial:
  Serial.begin(9600);
  Serial.println("Attempting to connect to WPA network...");
  Serial.print("SSID: ");
  Serial.println(ssid);

  status = WiFi.begin(ssid, pass);
  if ( status != WL_CONNECTED) {
    Serial.println("Couldn't get a WiFi connection");
    while(true);
  }
  else {
    server.begin();
    Serial.print("Connected to WiFi. My address:");
    IPAddress myAddress = WiFi.localIP();
    Serial.println(myAddress);


  }
}


void loop() {
  WiFiClient client = server.available();
  if (client && client.connected()) { 
    String request = client.readStringUntil('\n');
    Serial.println(request);
    client.print("response\n");
    client.stop();
}
}
